# Practica 1.1: Protocolo IPv4. Servicio DHCP

# Objetivos
En esta práctica se presentan las herramientas que se utilizarán en la asignatura y se repasan brevemente los aspectos básicos del protocolo IPv4. Además, se analizan las características del protocolo DHCP.

# Preparación del entorno

 1. Definir la máquina base de la asignatura

```c
asorregenarte
```
 2. Crear un archivo pr1.topol con la topología de la red, que consta de 4 máquinas y dos redes. El contenido del fichero debe ser:
```c
netprefix inet
machine 1 0 0
machine 2 0 0
machine 3 0 0 1 1
machine 4 0 1
```
La sintaxis es:

```c
machine <nº maquina> <interfaz n> <red conexion n>
```
 - Crear la topología de red que arrancará las 4 máquinas virtuales (VM1, VM2, Router y VM4).
```c
vtopol <pr1>.topol
```
# Configuracion estática
En primer lugar, configuraremos cada segmento de red 10.0.0.0/24 y 192.168.0.0/24 de forma estática asignando a cada máquina una dirección IP adecuada.

### Ejercicio 1[VM1]
Determinar los interfaces de red que tiene la máquina y las direcciones IP y/o MAC que tienen asignadas. Utilizar el comando ip.

### Ejercicio 2 [VM1, VM2, Router]
Activar los interfaces eth0 en las máquinas VM1, VM2 y Router, y asignar una dirección IP adecuada. La configuración debe realizarse con la utilidad ip, en particular los comandos ip address e ip link.

### Ejercicio 3 [VM1, VM2]
Arrancar la herramienta wireshark y activar la captura en el interfaz de red. Comprobar la conectividad entre VM1 y VM2 con la orden ping. Observar el tráfico generado, especialmente los protocolos encapsulados en cada datagrama y las direcciones origen y destino.

Completar la siguiente tabla para todos los mensajes intercambiados hasta la recepción de la primera respuesta Echo Reply:
- Anotar las direcciones MAC e IP de los mensajes.

- Para cada protocolo, anotar las características importantes (p. ej. pregunta/respuesta ARP o tipo ICMP) en el campo “Tipo de Mensaje”.

- Comparar los datos observados durante la captura con el formato de los mensajes estudiados en clase.
 
|  MAC Origen| MAC Destino  | Protocolo | IP Origen | IP Destino | Tipo Mensaje
|--|--|--|--|--|--|
|  |  |  |  |  |
|  |  |  |  |  |

### Ejercicio 4[VM1, VM2 ]
Ejecutar de nuevo la orden ping entre VM1 y VM2 y, a continuación, comprobar el estado de la tabla ARP en VM1 y VM2 usando el comando ip neigh. El significado del estado de cada entrada de la tabla se puede consultar en la página de manual del comando.

### Ejercicio 5[Router, VM4]
Repetir la configuración de red para el segmento 192.168.0.0/24. Comprobar la conectividad entre Router y VM4; y entre Router, VM1 y VM2.

#ENC


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE4MDg4MDcwODcsMTM3NTU1NjE3XX0=
-->